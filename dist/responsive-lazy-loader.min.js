!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("responsive-lazy-loader.js",[],e):"object"==typeof exports?exports["responsive-lazy-loader.js"]=e():t["responsive-lazy-loader.js"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getNodes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].slice.call(e.querySelectorAll(t))},getNodeOffsetY:function(t){var e=this.getScrollTop();return t.getBoundingClientRect().top+e},getSiblings:function(t){return[].filter.call(t.parentNode.children,function(e){return e!==t&&1===e.nodeType})},getScrollTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},removeItemFromArray:function(t,e){var o=t.indexOf(e);return o>-1&&t.splice(o,1),t},getAttr:function(t,e){return t.getAttribute(e)},setAttr:function(t,e,o){o&&t.setAttribute(e,o)},removeAttr:function(t,e){t.hasAttribute(e)&&t.removeAttribute(e)},isInPictureTag:function(t){return"PICTURE"===t.parentNode.nodeName},loadingArea:function(t){var e=this.getWindowHeight(),o=this.getScrollTop(),n=o-e-e*(t/100),r=o+e+e*(t/100);return{min:n>0?n:0,max:r}},debounce:function(t,e){var o=this,n=void 0;return function(){for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=o;clearTimeout(n),n=setTimeout(function(){return t.apply(i,a)},e)}},throttle:function(t,e){function o(){if(n)return r=arguments,void(a=this);n=!0,t.apply(this,arguments),setTimeout(function(){n=!1,r&&(o.apply(a,r),r=a=null)},e)}var n=!1,r=void 0,a=void 0;return o}}},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(0),i=n(s),u=o(2),d=n(u),l=o(3),c=n(l),f=function(){function t(e){r(this,t),this.options=c.default.setOptions(e),this.dataNodes=this.getDataNodes(),this.dataNodes.length&&(this.setListeners(),d.default.setImageOffsets(this.dataNodes),this.setLoad())}return a(t,[{key:"getDataNodes",value:function(){return i.default.getNodes("["+this.options.src+"]")}},{key:"setListeners",value:function(){var t=this;this.options.loadOnScroll&&window.addEventListener("scroll",i.default.throttle(function(){return t.setLoadOnScroll()},this.options.throttle)),window.addEventListener("resize",i.default.debounce(function(){return t.recalculateAndLoad()},this.options.resizeDebounce)),this.listenersCreated=!0}},{key:"onImageLoaded",value:function(t){t.parentNode&&(this.dataNodes=i.default.removeItemFromArray(this.dataNodes,t),this.recalculateAndLoad(),this.options.callback&&this.options.callback(t))}},{key:"setLoadOnScroll",value:function(){var t=this;this.dataNodes.forEach(function(e,o){var n=i.default.loadingArea(t.options.threshold);e.offsetY>=n.min&&e.offsetY<=n.max&&d.default.createImage(e,function(e){return t.onImageLoaded(e)})})}},{key:"setLoadAll",value:function(){var t=this;this.dataNodes.forEach(function(e,o){d.default.createImage(e,function(e){return t.onImageLoaded(e)})})}},{key:"setLoad",value:function(){this.options.loadOnScroll?this.setLoadOnScroll():this.setLoadAll()}},{key:"recalculateAndLoad",value:function(){d.default.setImageOffsets(this.dataNodes),this.setLoad()}},{key:"refresh",value:function(){this.listenersCreated||this.setListeners(),this.dataNodes=this.getDataNodes(),this.recalculateAndLoad()}}]),t}();e.default=f},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={createImage:function(t,e){r.default.isInPictureTag(t)&&this.setSources(t),r.default.setAttr(t,"src",r.default.getAttr(t,"data-src")),r.default.setAttr(t,"srcset",r.default.getAttr(t,"data-srcset")),r.default.setAttr(t,"sizes",r.default.getAttr(t,"data-sizes")),r.default.removeAttr(t,"data-src"),r.default.removeAttr(t,"data-srcset"),r.default.removeAttr(t,"data-sizes"),t.onload=function(t){return e(t.target)},t.onerror=function(){throw new Error("Image could not be loaded")}},setSources:function(t){r.default.getSiblings(t).forEach(function(t){r.default.setAttr(t,"srcset",r.default.getAttr(t,"data-srcset")),r.default.removeAttr(t,"data-srcset")})},setImageOffsets:function(t){t.forEach(function(t){t.offsetY=r.default.getNodeOffsetY(t)})}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={setOptions:function(t){var e={threshold:0,throttle:250,resizeDebounce:500,loadOnScroll:!0,callback:void 0,src:"data-src",srcset:"data-srcset",sizes:"data-sizes"};return"object"===(void 0===t?"undefined":r(t))?n({},e,t):e}}}])});