!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("responsive-lazy-loader.js",[],e):"object"==typeof exports?exports["responsive-lazy-loader.js"]=e():t["responsive-lazy-loader.js"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getNodes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].slice.call(e.querySelectorAll(t))},getNodeOffsetY:function(t){var e=this.getScrollTop();return t.getBoundingClientRect().top+e},getScrollTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},removeItemFromArray:function(t,e){var n=t.indexOf(e);return n>-1&&t.splice(n,1),t},loadingArea:function(t){var e=this.getWindowHeight(),n=this.getScrollTop(),o=n-e-e*(t/100),r=n+e+e*(t/100);return{min:o>0?o:0,max:r}},debounce:function(t,e){var n=this,o=void 0;return function(){for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=n;clearTimeout(o),o=setTimeout(function(){return t.apply(i,a)},e)}},throttle:function(t,e){function n(){if(o)return r=arguments,void(a=this);o=!0,t.apply(this,arguments),setTimeout(function(){o=!1,r&&(n.apply(a,r),r=a=null)},e)}var o=!1,r=void 0,a=void 0;return n}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),i=o(s),u=n(2),c=o(u),l=n(3),d=o(l),f=function(){function t(e){r(this,t),this.options=d.default.setOptions(e),this.dataNodes=this.getDataNodes(),this.dataNodes.length&&(this.setListeners(),c.default.setImageOffsets(this.dataNodes),this.setLoad())}return a(t,[{key:"getDataNodes",value:function(){return i.default.getNodes("["+this.options.src+"]")}},{key:"setListeners",value:function(){var t=this;this.options.loadOnScroll&&window.addEventListener("scroll",i.default.throttle(function(){return t.setLoadOnScroll()},this.options.throttle)),window.addEventListener("resize",i.default.debounce(function(){return t.recalculateAndLoad()},this.options.resizeDebounce))}},{key:"onImageCreated",value:function(t,e){t.parentNode&&(t.parentNode.replaceChild(e,t),this.dataNodes=i.default.removeItemFromArray(this.dataNodes,t),this.recalculateAndLoad(),this.options.callback&&this.options.callback(e))}},{key:"setLoadOnScroll",value:function(){var t=this;this.dataNodes.forEach(function(e,n){var o=i.default.loadingArea(t.options.threshold);e.offsetY>=o.min&&e.offsetY<=o.max&&c.default.createImageNode(e,t.options).then(function(n){t.onImageCreated(e,n)})})}},{key:"setLoadAll",value:function(){var t=this;this.dataNodes.forEach(function(e,n){c.default.createImageNode(e,t.options).then(function(n){t.onImageCreated(e,n)})})}},{key:"setLoad",value:function(){this.options.loadOnScroll?this.setLoadOnScroll():this.setLoadAll()}},{key:"recalculateAndLoad",value:function(){c.default.setImageOffsets(this.dataNodes),this.setLoad()}},{key:"refresh",value:function(){this.dataNodes=this.getDataNodes(),this.recalculateAndLoad()}}]),t}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={createImageNode:function(t,e){var n=this;return new Promise(function(o,r){var a=new Image;return n.setCustomAttrs(t,a,e),n.setAdditionalAttrs(t,a,e),a.onload=function(t){return o(t.target)},a.onerror=r,a})},getAttr:function(t,e){return t.getAttribute(e)},setCustomAttrs:function(t,e,n){var o=this;this.getCustomImgAttrs(n).forEach(function(n){o.setAttr(e,n.name,o.getAttr(t,n.value))})},setAdditionalAttrs:function(t,e,n){var o=this;[].slice.call(t.attributes).forEach(function(t){["src","data-src","data-srcset","data-sizes"].includes(t.name)||o.setAttr(e,t.name,t.value)})},getCustomImgAttrs:function(t){var e=[];return[{name:"srcset",value:t.srcset},{name:"src",value:t.src},{name:"sizes",value:t.sizes}].forEach(function(t){void 0!==t.value&&e.push(t)}),e},setAttr:function(t,e,n){n&&t.setAttribute(e,n)},setImageOffsets:function(t){t.forEach(function(t){t.offsetY=r.default.getNodeOffsetY(t)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={setOptions:function(t){var e={threshold:0,throttle:250,resizeDebounce:500,loadOnScroll:!0,callback:void 0,src:"data-src",srcset:"data-srcset",sizes:"data-sizes"};return"object"===(void 0===t?"undefined":r(t))?o({},e,t):e}}}])});